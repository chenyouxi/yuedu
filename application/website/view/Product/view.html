{include file="./public/header" }
{include file="./public/navbar" }
{css href="__STATIC__/css/goods.css" rel="stylesheet" type="text/css"}


<script src="__STATIC__/echarts/echarts.min.js"></script>


<style>
    .price{display: inline-grid;font-size: 18px;margin-top: 0;margin-left: 5px;line-height: 18px;}
</style>

<div class="container p-0 " >
    <!-- 商品详细信息 -->
    <div class="card p-0 mt-5">
        <!-- 商品图片以及相册 _star-->
        <div class="row no-gutters mt-5">

            <div id="preview" class="preview col-12 col-md-4 ml-5">
                <div class="goodsgallery">
                    <link rel="stylesheet" href="__STATIC__/gallery/gallery.css">


                    <script type="text/javascript" src="__STATIC__/gallery/gallery.js"></script>
                    <link rel="stylesheet" href="__STATIC__/plyr/plyr.css">
                    <script type="text/javascript" src="__STATIC__/plyr/plyr.js"></script>
                    <style>
                        .magnifying-glass{position: absolute;bottom: 0;right: 0;cursor:pointer;z-index:999;}
                    </style>

                    <div id="MagnifierWrap">
                        <div class="MagnifierMain">
                            <img class="MagTargetImg" style="max-width:100%;max-height:100%;"  src=" " data_big_img=" "/>
                        </div>
                        <script>

                            plyr.setup();

                            function goods_video_pause(){

                                $(".goods-video-pause").hide();
                                $(".goods-video-box").remove();
                                $(".goods-video-play").show();
                                $("#video-is-play").val('0');
                            }

                            function goods_video_play(){

                                $(".goods-video-play").hide();
                                $(".goods-video-pause").show();
                                $("#video-is-play").val('1');
                                $(".MagnifierDrag").remove();
                                $(".MagnifierPop").remove();

                                var html = '';
                                html += '<div class="goods-video-box">';
                                html += '<video autoplay controls loop >';
                                html += '<source src="" type="video/mp4" />';
                                html += '</video>';
                                html += '</div>';

                                $(".MagnifierMain").append(html);
                                plyr.setup();
                            }
                        </script>

                        <span class="spe_leftBtn on">&lt;</span>
                        <span class="spe_rightBtn on" >&gt;</span>
                        <div class="spec-items">
                            <ul id="imageList">
                                <ul>
                                    <!-- 否则显示商品组图 -->
                                    <!-- 这里为了使用ajax配合插件使用 -->
                                    {for start="0" end="10" }
                                    <li>
                                        <img src="" data_big_img="" data-picture-id="" data-pic-cover="">
                                    </li>
                                    {/for}

                                </ul>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="detail-info col-12 col-md-6">
                <!-- 商品名称 -->
                <h1 class="goods-name js-goods-name"></h1>
                <p>
                    <span class="score-value-no"><em style="width:100%;"></em></span>
                </p>

                <span style="white-space: nowrap;" class="small" id="start">

                </span>
                <p>by <span id="manufacturer" style="color:#66f;"></span></p>

                <div class="goods-price pull-left">
                    <div id="priceList">

                    </div>

                    <div class="pull-left text-secondary  mt-1 small">
                        (最近星级变动时间: <span id="lastRatingUpdate"></span>, 最近价格修改时间: <span id="lastPriceChange"></span>)
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>


<div class="container mt-2 p-0 mb-5" style="min-height:200px;">

    <!-- 右半部分内容 -->
    <div class="card">
        <div class="wrapper">

            <div id="main-nav-holder" class="goods-detail">
                <ul id="nav" class="tab">
                    <li class="title-list current"><a href="javascript:;" id="dataTab"> 商品详情 </a></li>
                    <li class="title-list "><a href="javascript:;" id="amzPriceTab">历史价格走势</a></li>
                    <li class="title-list"><a href="javascript:;" id="trackProductTab">评级、销量、评论走势 </a></li>
                </ul>
            </div>

            <div id="data_tab" class="row no-gutters mt-5">
                <div  class="row m-3">
                    <div id="description"></div>
                </div>
                <div class="row m-auto col-12 " >

                <div class="   col-md-6" >
                    <table class="js-freeze-header table">
                        <thead>
                            <tr class="bg-light text-secondary p-4 "><td colspan="2">&nbsp;&nbsp;商品详情</td> </tr>
                        </thead>
                        <tbody class="border-light border-bottom" id="Details">

                        </tbody>
                    </table>
                </div>



                <div class=" col-md-6 " >
                    <table id="table-condition-search" class="js-freeze-header table">
                        <thead>
                        <tr class="bg-light text-secondary p-4"><td colspan="2">&nbsp;&nbsp;当前销售排名及平均排名情况 </td></tr>
                        </thead>
                        <tbody class="border-light border-bottom" id="current">
                        </tbody>
                    </table>
                </div>
                </div>


            </div>

            <div id="amz_price_tab" class="mt-5 mb-5 m-2" style="display:none;">
                <div id="priceHistory" style="height:400px;" class="col-12 container"></div>
            </div>

            <div id="track_product_tab" class=" m-5" style="display:none;">
                <div id="srr" style="height:400px;" class="col-12 container"></div>
            </div>
        </div>
    </div>


</div>


<!--<div class="row" id="trend-info">-->
    <!--<div class="col-12" id="keepa-history-trend" style="height: 600px;"></div>-->
    <!--<div class="chart-tip" style="position: absolute;bottom: 30px;right: 10px;width: 160px;height: 17px;font-size: 12px;color: rgba(134, 146, 158, 1);line-height: 17px;">-->
        <!--<div class="flex" id="range" style="margin-top:-185px;margin-left:-22px"></div>-->
    <!--</div>-->
<!--</div>-->

<script>

    $("#dataTab").click(function(){
        $("#nav").find('li').removeClass("current");
        $(this).parent("li").addClass("current");
        $("#track_product_tab").hide();
        $("#amz_price_tab").hide();
        $("#data_tab").show();
    })

    $("#amzPriceTab").click(function(){
        $("#nav").find('li').removeClass("current");
        $(this).parent("li").addClass("current");
        $("#data_tab").hide();
        $("#track_product_tab").hide();
        $("#amz_price_tab").show();
    })

    $("#trackProductTab").click(function(){
        $("#nav").find('li').removeClass("current");
        $(this).parent("li").addClass("current");
        $("#data_tab").hide();
        $("#amz_price_tab").hide();
        $("#track_product_tab").show();
    })



    //获取商品详情
    $(document).ready(function () {
        $.ajax({
            type:"post",
            url:"/website/ajaxProductInfo",
            data:"asinId={$asinId}&station={$station}",
            dataType:'json',
            beforeSend:function(){
                $.loading();
            },
            success:function(data){
                $.loaded();

                if(data.status == 'success'){
                    var productInfo = data.data;
                    console.log(data);
                    $(".js-goods-name").html(productInfo.title);
                    var start = ''
                    for(i=0;i<6;i++){
                        if(productInfo.stats.current[16] - i*10 < 10 && productInfo.stats.current[16] - i*10 > 0){
                            start += '<i style="color:#f1bb00" class="fa fa-star-half-o"></i>';
                        } else if ( productInfo.stats.current[16] - i*10 <= 0 ){
                            start += '<i style="color:#f1bb00" class="fa fa-star-o"></i>';
                        } else {
                            start += ' <i style="color:#f1bb00" class="fa fa-star"></i>';
                        }
                    }
                    start += '<span style="color:#cea000" > '+number_format(productInfo.stats.current[16]/10)+' </span>('+number_format(productInfo.stats.current[17])+' reviews)';
                    $("#start").html(start);
                    $("#manufacturer").html(productInfo.manufacturer);

                    var priceList = '';
                    if( productInfo.amzPrice != '-1' ){
                        var amzPrice = productInfo.amzPrice/100;
                        priceList += '<div class="pull-left "><span class=""> Amazon:</span><font class="price col-1" style="color:#f47a00;" > $'+amzPrice.toFixed(2)+' </font></div>';
                    }
                    if ( productInfo.newPrice != '-1' ){
                        var newPrice = productInfo.newPrice/100;
                        priceList += '<div class="pull-left"><span class=""> New:</span><font class="price col-1" style="color:#66f;" > $'+newPrice.toFixed(2)+' </font></div>';
                    }
                    if ( productInfo.usePrice != '-1' ){
                        var usePrice = productInfo.usePrice/100;
                        priceList += '<div class="pull-left"><span class=""> Used:</span><font class="price col-1" style="color:#444;" > $'+usePrice.toFixed(2)+' </font></div>';
                    }
                    if ( productInfo.eBayPrice != '-1'){
                        var eBayPrice = productInfo.eBayPrice/100;
                        priceList += '<div class="pull-left"><span class=""> eBay New:</span><font class="price col-1" style="color:#009688;" > $'+eBayPrice.toFixed(2)+' </font></div>';
                    }

                    $("#priceList").html(priceList);

                    $("#lastRatingUpdate").html(productInfo.lastRatingUpdate);
                    $("#lastPriceChange").html(productInfo.lastPriceChange);
                    $("#description").html(productInfo.description);


                    var infoData = '';
//                    if(productInfo.trackingSince){
//                        var trackingSince = new Date(productInfo.trackingSince*1000).Format("yyyy-MM-dd");
//                        infoData += '<tr><td> <span>Tracking since</span> </td><td class="align-middle"><div> <span>'+trackingSince+'</span> </div></td></tr>';
//                    }
                    if(productInfo.categoryTree){
                        var categoryTree = '';
                        for(j=0;j<=productInfo.categoryTree.length;j++){
                            if(productInfo.categoryTree[j]){
                                if(j < productInfo.categoryTree.length-1){
                                    var symbol = ' >> ';
                                } else {
                                    var symbol = '';
                                }
                                categoryTree += '<span class="small">'+productInfo.categoryTree[j].name+symbol+'</span>';
                            }

                        }
                        infoData += '<tr><td> <span>商品分类目录</span> </td><td class="align-middle"><div>'+categoryTree+'</div></td></tr>';
                    }
                    if(productInfo.asin){
                        infoData += '<tr><td> <span> ASIN </span> </td><td> <div> <span>'+productInfo.asin+'</span> </div> </td></tr>';
                    }
//                    if(productInfo.ean){
//                        infoData += '<tr><td> <span> Product Codes - EAN </span> </td><td class="align-middle"> <div> <span>'+productInfo.ean+'</span> </div> </td></tr>';
//                    }
                    if(productInfo.upc){
                        infoData += '<tr><td> <span> UPC </span> </td><td class="align-middle"> <div> <span>'+productInfo.upc+'</span> </div> </td></tr>';
                    }
//                    if(productInfo.mpn){
//                        infoData += '<tr><td> <span> Product Codes - MPN </span> </td><td class="align-middle"> <div> <span>'+productInfo.mpn+'</span> </div> </td></tr>';
//                    }
//                    if(productInfo.partNumber){
//                        infoData += '<tr><td> <span> Product Codes - PartNumber </span> </td><td class="align-middle"> <div> <span>'+productInfo.partNumber+'</span> </div> </td></tr>';
//                    }
                    if(productInfo.brand){
                        infoData += '<tr><td> <span> 品牌 </span> </td><td><div> <span>'+productInfo.brand+'</span> </div></td></tr>';
                    }
                    if(productInfo.color){
                        infoData += '<tr><td> <span> 颜色 </span> </td><td class="align-middle"><div> <span style="color:'+productInfo.color+';"> '+productInfo.color+' </span> </div></td></tr>';
                    }
//                    if(productInfo.binding){
//                        infoData += '<tr><td> <span> Binding </span> </td><td class="align-middle"><div> <span> '+productInfo.binding+' </span> </div></td></tr>';
//                    }
                    if( productInfo.packageLength || productInfo.packageWidth || productInfo.packageHeight || productInfo.packageLength || productInfo.packageWidth  ||  productInfo.packageHeight ){
                        infoData += '<tr><td> <span> 包装规格 (<span class="toggle-unit" title="Toggle unit">cm</span>³) </span> </td>' +
                            '<td class="align-middle"><div> <span> '+productInfo.packageLength/10+' x '+productInfo.packageWidth/10+' x '+productInfo.packageHeight/10+'cm (='+ (productInfo.packageLength/10 * productInfo.packageWidth/10 * productInfo.packageHeight/10).toFixed(2) +'<span class="toggle-unit" title="Toggle unit">cm</span>³)  </span> </div></td></tr>';
                    }
                    if(productInfo.packageWeight){
                        infoData += '<tr><td> <span> 包装重量 (<span class="toggle-unit" title="Toggle unit">g</span>) </span> </td><td class="align-middle"><div> <span> '+ productInfo.packageWeight +'g </span> </div></td></tr>';
                    }
                    if(productInfo.packageQuantity != '-1'){
                        infoData += '<tr><td> <span> 包装量 </span> </td><td class="align-middle"><div> <span> '+productInfo.packageQuantity+' </span> </div></td></tr>';
                    }
                    if( productInfo.itemHeight != '-1' && productInfo.itemLength != '-1' && productInfo.itemWidth != '-1'){
                        infoData += '<tr><td> <span> 商品规格 (<span class="toggle-unit" title="Toggle unit">cm</span>³) </span> </td><td class="align-middle"><div> <span> '+productInfo.itemLength/10+' x '+productInfo.itemWidth/10+' x '+productInfo.itemHeight/10+'cm (='+(productInfo.itemLength/10 * productInfo.itemWidth/10 * productInfo.itemHeight/10).toFixed(2)+'<span class="toggle-unit" title="Toggle unit">cm</span>³)  </span> </div></td></tr>';
                    }
                    if( productInfo.itemWeight != '-1' ){
                        infoData += '<tr><td> <span> 商品重量 (<span class="toggle-unit" title="Toggle unit">g</span>) </span> </td><td class="align-middle"><div> <span> '+productInfo.itemWeight+'g </span> </div></td></tr>';
                    }
                    $("#Details").html(infoData);

                    var current = '';
                    if(productInfo.stats.current[3] != '-1'){ current += '<tr><td class="align-middle"><span>销售排名</span></td><td class="align-middle"><div><span>#'+number_format(productInfo.stats.current[3])+'</span></div></td></tr>';}
                    if(productInfo.stats.avg30[3] != '-1'){ current += '<tr><td class="align-middle"><span>30天平均销售排名</span></td><td class="align-middle"><div><span>#'+number_format(productInfo.stats.avg30[3])+'</span></div></td></tr>';}
                    if(productInfo.stats.avg30[3] != '-1'){ current += '<tr><td class="align-middle"><span>60天平均销售排名</span></td><td class="align-middle"><div><span>#'+number_format(productInfo.stats.avg30[3])+'</span></div></td></tr>';}
                    if(productInfo.stats.avg90[3] != '-1'){ current += '<tr><td class="align-middle"><span>90天平均销售排名</span></td><td class="align-middle"><div><span>#'+number_format(productInfo.stats.avg90[3])+'</span></div></td></tr>';}
                    if(productInfo.stats.avg90[3] != '-1'){ current += '<tr><td class="align-middle"><span>180天平均销售排名</span></td><td class="align-middle"><div><span>#'+number_format(productInfo.stats.avg180[3])+'</span></div></td></tr>';}
                    if(productInfo.stats.avg180[17] != '-1'){ current += '<tr><td class="align-middle"><span>评论数量（90天平均）</span></td><td class="align-middle"><div><span>'+number_format(productInfo.stats.avg90[17])+'</span></div></td></tr>';}
                    if(productInfo.stats.current[0] != '-1'){
                        current += '<tr><td class="align-middle"><span> 价格 </span></td><td class="align-middle"><div><span>$'+(productInfo.stats.current[0]/100).toFixed(2)+'</span></div></td></tr>';
                    }
                    if(productInfo.stats.avg90[0] != '-1'){
                        current += '<tr><td class="align-middle"><span> 90天平均价格 </span></td><td class="align-middle"><div><span>$'+(productInfo.stats.avg90[0]/100).toFixed(2)+'</span></div></td></tr>';
                    }
                    $("#current").html(current);

                    //图片列表
                    var images = '';
                    for(k=0;k<productInfo.imagesCSV.length;k++){
                        if(k==0){
                            images += '<li class="on">';
                        } else {
                            images += '<li>';
                        }

                        images += '<img src="https://images-na.ssl-images-amazon.com/images/I/'+productInfo.imagesCSV[k]+'" data_big_img="https://images-na.ssl-images-amazon.com/images/I/'+productInfo.imagesCSV[k]+'" data-picture-id="https://images-na.ssl-images-amazon.com/images/I/'+productInfo.imagesCSV[k]+'" data-pic-cover="'+productInfo.imagesCSV[k]+'" /></li>';
                    }
                    // var MagnifierMain = '<img class="MagTargetImg" style="max-width:100%;max-height:100%;"  src="https://images-na.ssl-images-amazon.com/images/I/'+productInfo.imagesCSV[0]+'" data_big_img="https://images-na.ssl-images-amazon.com/images/I/'+productInfo.imagesCSV[0]+'"/>';
                    $(".MagTargetImg").attr("src","https://images-na.ssl-images-amazon.com/images/I/"+productInfo.imagesCSV[0]);
                    $(".MagTargetImg").attr("data_big_img","https://images-na.ssl-images-amazon.com/images/I/"+productInfo.imagesCSV[0]);

                    $("#imageList").html(images);



                    //获取chart
                    $.post("/website/ajaxProductChart","asinId={$asinId}&station={$station}",function(data){
                        if(data.status == 'success'){
                            var priceHistory = data.data.priceHistory;
                            option.series[0].data = priceHistory.amz;
                            option.series[1].data = priceHistory.new;
                            option.series[2].data = priceHistory.used;
                            myChart.hideLoading(); //数据获取成功之后隐藏动画
                            myChart.setOption(option);

                            var srr = data.data.srr;
                            srrOption.series[0].data = srr.rating;
                            srrOption.series[1].data = srr.sales;
                            srrOption.series[2].data = srr.reviews;
                            srrChart.hideLoading(); //数据获取成功之后隐藏动画
                            srrChart.setOption(srrOption);
                        }
                    },'json');



                } else {
                    layer.msg(data.msg);
                }
            }
        });
    });




</script>
<script type="text/javascript">


    //时间格式化
    Date.prototype.Format = function (fmt) {
        var o = {
            "M+": this.getMonth() + 1,
            //月份
            "d+": this.getDate(),
            //日
            "h+": this.getHours(),
            //小时
            "m+": this.getMinutes(),
            //分
            "s+": this.getSeconds(),
            //秒
            "q+": Math.floor((this.getMonth() + 3) / 3),
            //季度
            "S": this.getMilliseconds() //毫秒
        };
        if (/(y+)/.test(fmt)) {
            fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        }
        for (var k in o) {
            if (new RegExp("(" + k + ")").test(fmt)) {
                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            }
        }
        return fmt;
    };



    //chart

    var worldMapContainer = document.getElementById('priceHistory');
    var srrMapContainer = document.getElementById('srr');
    //用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
    var resizeWorldMapContainer = function () {
        worldMapContainer.style.width = window.innerWidth + 'px';
        srrMapContainer.style.width = window.innerWidth +'px';
        //worldMapContainer.style.height = window.innerHeight/1.5+'px';
    };
    //设置容器高宽
    resizeWorldMapContainer();

    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('priceHistory'));

    var srrChart = echarts.init(document.getElementById('srr'));
    myChart.showLoading({
        text : "加载中...",
        effect :"ring" ,//可选为：'spin' | 'bar' | 'ring' | 'whirling' | 'dynamicLine' | 'bubble'
        color: "#3377FF",
        textColor: "#9FA3A8"
    }); //数据获取显示之前先加载一段动画
    //数据获取显示之前先加载一段动画
    srrChart.showLoading({
        text : "加载中...",
        effect :"ring" ,//可选为：'spin' | 'bar' | 'ring' | 'whirling' | 'dynamicLine' | 'bubble'
        color: "#3377FF",
        textColor: "#9FA3A8"
    });




    // 指定图表的配置项和数据
    var option = {
        title: {
            text: '商品价格走势',
            textStyle: {
                width: '200px',
                fontSzie: '15px',
                color: '#3377FF',
                rich: {}
            },

        },

        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'cross',
                label: {
                    backgroundColor: 'rgba(0, 0, 0, .7)'
                }
            },
            padding: [5, 10],
            backgroundColor: 'rgba(0, 0, 0, .7)',
        },
        toolbox: {
            //top: '170',
            right: 200,
            feature: {
                dataZoom: {
                    yAxisIndex: 'none',
                    title: {
                        zoom: "区域缩放",//'Time Interval Adjustment',
                        back: "区域缩放还原"//'Restore the Time Interval'
                    },
                    emphasis: {
                        iconStyle: {
                            borderColor: '#3377FF'
                        }
                    }
                },
                restore: {
                    title: "还原",//'Restore',
                    emphasis: {
                        iconStyle: {
                            borderColor: '#3377FF'
                        }
                    }
                },
                saveAsImage: {
                    title: "保存为图片",//'Save as image',
                    //name: "SellerSprite-{$station}-{$asinId}-" + new Date().format("yyyyMMdd"),
                    name:'',
                    emphasis: {
                        iconStyle: {
                            borderColor: '#3377FF'
                        }
                    }
                }
            }
        },
        legend: {
            data:['Amazon','New','Used'],
            itemGap: 15,
        },
        grid: [{
            left: 50,
            right: 230,
        }, {
            left: 50,
            right: 230,
            top: '55%',
        }],
        color: ['#FFAE2D', '#5FB0FF', '#6EC952', '#909CF7', '#FF8C45', '#FB7A7A', '#62E3BE'],
        dataZoom: [
            {
                show: true,
                realtime: true,
                start: 50,
                end: 100,
                top:"92%",
            },
            {
                type: 'slider',
                realtime: true,
                start: 50,
                end: 100,
                top:"92%",
                borderColor: '#E5E7EC',
                dataBackground: {
                    lineStyle: {
                        color: '#E7ECF7'
                    },
                    areaStyle: {
                        color: '#F2F5FB'
                    }
                },
                fillerColor: 'rgba(229,234,245,.4)'
            }
        ],
        xAxis: {
            type:'time',
            name:'时间',
            boundaryGap: false,
            data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: [{
            name:'Amazon',
            type: 'value',
            axisLine: {
                lineStyle: {
                    color: '#7B7E81'
                }
            },
            axisLabel: {
                color: '#7B7E81',
                formatter: '${value}'
            },
            inverse: false //起始点
        },{
            name:'New',
            type: 'value',
            axisLine: {
                lineStyle: {
                    color: '#7B7E81'
                }
            },
            axisLabel: {
                color: '#7B7E81',
                formatter: '${value}'
            },
            inverse: false //起始点
        },{
            name:'Used',
            type: 'value',
            offset:40,
            axisLine: {
                lineStyle: {
                    color: '#7B7E81'
                }
            },
            axisLabel: {
                color: '#7B7E81',
                formatter: '${value}'
            }
        }],
        series: [{
            name: 'Amazon',
            type: 'line',
            data: [],
            yAxisIndex:0,
            symbolSize: 1,
            step: true,
            smooth: false,//true 为平滑曲线，false为直线
            itemStyle: {
                normal: {
                    lineStyle: {
                        width: 1.5,  // 设置线宽
                        type: 'solid'  //'dotted'虚线 'solid'实线
                    }
                }
            },
        },{
            name: 'New',
            type: 'line',
            data: [],
            yAxisIndex:1,
            symbolSize: 1,
            step: true,
            smooth: false,//true 为平滑曲线，false为直线
            itemStyle: {
                normal: {
                    lineStyle: {
                        width: 1.5,  // 设置线宽
                        type: 'solid'  //'dotted'虚线 'solid'实线
                    }
                }
            },
        },{
            name: 'Used',
            type: 'line',
            data: [],
            yAxisIndex:2,
            symbolSize: 1,
            step: true,
            smooth: false,//true 为平滑曲线，false为直线
            itemStyle: {
                normal: {
                    lineStyle: {
                        width: 1.5,  // 设置线宽
                        type: 'solid'  //'dotted'虚线 'solid'实线
                    }
                }
            },
        }]


    };

    //rating、sales、reviews
    var srrOption = {
        title: {
            text: '销量、评论、评级历史走势',
            textStyle: {
                width: '200px',
                fontSzie: '15px',
                color: '#3377FF',
                rich: {}
            },

        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'cross',
                label: {
                    backgroundColor: 'rgba(0, 0, 0, .7)'
                }
            },
            padding: [5, 10],
            backgroundColor: 'rgba(0, 0, 0, .7)',
        },
        legend: {
            data:['Rating','Sales','Reviews'],
            itemGap: 15,
        },
        grid: [{
            left: 50,
            right: 230,
            //height: '36%'
        }, {
            left: 50,
            right: 230,
            top: '55%',
           // height: '36%'
        }],
        toolbox: {
            //top: '170',
            right: 200,
            feature: {
                dataZoom: {
                    yAxisIndex: 'none',
                    title: {
                        zoom: "区域缩放",//'Time Interval Adjustment',
                        back: "区域缩放还原"//'Restore the Time Interval'
                    },
                    emphasis: {
                        iconStyle: {
                            borderColor: '#3377FF'
                        }
                    }
                },
                restore: {
                    title: "还原",//'Restore',
                    emphasis: {
                        iconStyle: {
                            borderColor: '#3377FF'
                        }
                    }
                },
                saveAsImage: {
                    title: "保存为图片",//'Save as image',
                    //name: "SellerSprite-{$station}-{$asinId}-" + new Date().format("yyyyMMdd"),
                    name:'',
                    emphasis: {
                        iconStyle: {
                            borderColor: '#3377FF'
                        }
                    }
                }
            }
        },
        axisPointer: {
            link: {xAxisIndex: 'all'}
        },
        // dataZoom: [
        //     { type: 'slider', realtime: true, start: 0, end: 100 }
        // ],
        dataZoom: [
            {
                show: true,
                realtime: true,
                start: 50,
                end: 100,
                top:"92%",
                //xAxisIndex: [0, 1]//0,1,2,3
            },
            {
                type: 'slider',
                realtime: true,
                start: 50,
                end: 100,
                top:"92%",
                //xAxisIndex: [0, 1, 2, 3],//0,1,2,3
                borderColor: '#E5E7EC',
                dataBackground: {
                    lineStyle: {
                        color: '#E7ECF7'
                    },
                    areaStyle: {
                        color: '#F2F5FB'
                    }
                },
                fillerColor: 'rgba(229,234,245,.4)'
            }
        ],
        color: ['#FFAE2D', '#5FB0FF', '#6EC952', '#909CF7', '#FF8C45', '#FB7A7A', '#62E3BE'],
        xAxis: {
            type:'time',
            axisLine: {
                onZero: true,
                lineStyle: {
                    color: '#E5E7EC'
                }
            },
            name:'时间',
            position: 'bottom',
            boundaryGap: false,
            data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: [{
            name:'Rating',
            type: 'value',
            splitLine: {
                show: false
            },
            axisLine: {
                lineStyle: {
                    color: '#7B7E81'
                }
            },
            axisLabel: {
                color: '#7B7E81',
                formatter: '{value}'
            },
            inverse: false //起始点
        },{
            name:'Sales',
            type: 'value',
            axisLine: {
                lineStyle: {
                    color: '#7B7E81'
                }
            },
            axisLabel: {
                color: '#7B7E81',
                formatter: '{value}'
            },
            inverse: false //起始点
        },{
            name:'Reviews',
            type: 'value',
            offset:50,
            axisLine: {
                lineStyle: {
                    color: '#7B7E81'
                }
            },
            axisLabel: {
                color: '#7B7E81',
                formatter: '{value}'
            }
        }],
        series: [{
            name: 'Rating',
            type: 'line',
            data: [],
            yAxisIndex:0,
            symbolSize: 1,
            step: true,
            smooth: false,//true 为平滑曲线，false为直线
            itemStyle: {
                normal: {
                    lineStyle: {
                        width: 1.5,  // 设置线宽
                        type: 'solid'  //'dotted'虚线 'solid'实线
                    }
                }
            },
        },{
            name: 'Sales',
            type: 'line',
            data: [],
            yAxisIndex:1,
            symbolSize: 1,
            step: true,
            smooth: false,//true 为平滑曲线，false为直线
            itemStyle: {
                normal: {
                    lineStyle: {
                        width: 1.5,  // 设置线宽
                        type: 'solid'  //'dotted'虚线 'solid'实线
                    }
                }
            },
        },{
            name: 'Reviews',
            type: 'line',
            data: [],
            yAxisIndex:2,
            symbolSize: 1,
            step: true,
            smooth: false,//true 为平滑曲线，false为直线
            itemStyle: {
                normal: {
                    lineStyle: {
                        width: 1.5,  // 设置线宽
                        type: 'solid'  //'dotted'虚线 'solid'实线
                    }
                }
            },
        }]
    };

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);

    srrChart.setOption(srrOption);
    //用于使chart自适应高度和宽度
    window.onresize = function () {
        //重置容器高宽
        resizeWorldMapContainer();
        myChart.resize();
        srrChart.resize();
    };

</script>


{include file="./public/footer" }